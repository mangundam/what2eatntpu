<html>
<head>
<meta charset="utf-8">
<style>
html { background-color: #000; } 
body {
    min-height: 100vh;
    max-width: 400px;
    margin: 0 auto;
}
.main{
	width:540px;
	height:960px;
	border: 5px solid red;
}
.line{
	padding: 248.5px 0px 0px 0px;
	width:250px;
	margin:0px 0px 0px 0px;
	border-bottom: 3px solid red;
	position:absolute;
}
.lineBox{
	width:500px;
	height:500px;
	position:absolute;

}

.triangle-down {
	width: 0;
	height: 0;
	border-left: 20px solid transparent;
	border-right: 20px solid transparent;
	border-top: 40px solid #555;
	position:absolute;
	margin:-10px 230px 230px 230px;
	border-top-color:#50FA50;
}


.Cricle{
	border:5px #70EE70 solid;
	height: 500px;
	width: 500px;
	background-color: #FFF;
	border-radius: 50%;
	align: center;
	margin:250px auto;
}


.Choice_text{
	position:absolute;
	bottom:-2px;
	right:70px;
	transform: rotate(180deg);
}
.centerCircle{
	border:5px #70EE70 solid;
	height: 20px;
	width: 20px;
	background-color: #70EE70;
	border-radius: 50%;
	position:absolute;
	margin:235px;
}
.btn{
width:100px;
height:60px;
font-size:20px;
}
.slider{
width:500px;
height: 50px;
}
</style></head>
<body>
<script>
var count=0;
var Spinning = false;
var SpinSpeed = 1;
function delay(n){
    return new Promise(function(resolve){
        setTimeout(resolve,n*1000);
    });
}
async function rotat(name) {
	const angles = [];
  if (Spinning == false){
    Spinning = true;
	const btnText = document.getElementById("mainBtn");
	btnText.textContent = "Pause";
  }
  else{
	Spinning = false;
	const btnText = document.getElementById("mainBtn");
	btnText.textContent = "Start";
  }
  const rectangle = document.getElementsByClassName(name) 
  angle = 360/rectangle.length
  for (var i=0;i<rectangle.length;i++){
	angles[i] = i*angle
  }
  while(Spinning){
	
    count++;
	//console.log(count)
	 
	  for(var j=0;j<rectangle.length;j++){
		//console.log(rectangle[j]) 
		var SpinSpeed = document.getElementById("Speed").value/100+1;
		var deg = (SpinSpeed*count +(angle*j));
		//console.log(SpinSpeed)
		rectangle[j].style.transform = "rotate(" + deg + "deg)";

	  }
	  //rectangle.style.animation = "rotation 3s infinite linear";
	  await delay(0.001);
  }
  
}

function stopSpin(name){
count = 0;
const rectangle = document.getElementsByClassName(name) 
for(var j=0;j<rectangle.length;j++){
		rectangle[j].style.transform = "rotate(0deg)";
	  }
}

var list;

function readList(filename){
fetch(filename)
    .then(function(response) {return response.text()})
    .then(function(html) {
		
		list = html
		list = list.split("\n");
		
		delete_Line()
		add_Line(Object.keys(list).length-1)
		
		const Choice_text = document.getElementsByClassName('Choice_text')
		const rectangle = document.getElementsByClassName('lineBox')
		angle = 360/rectangle.length
		for(var j=0;j<Choice_text.length;j++){
				console.log(Choice_text[j].textContent);
				Choice_text[j].textContent = list[j];
				rectangle[j].style.transform = "rotate(" + angle*j + "deg)";
			  }
		console.log(list);
    })
    .catch(function(err) {  
        console.log('Failed to fetch page: ', err);  
    });
}
function delete_Line(){
	const LineBox = document.getElementsByClassName("lineBox");
	while(LineBox.length > 0){
        LineBox[0].parentNode.removeChild(LineBox[0]);
    }

}


function add_Line(number){
	for(var i=0;i<number;i++){
		var lineBox = document.createElement("div");
		lineBox.classList.add("lineBox");
		var line = document.createElement("div");
		line.classList.add("line");
		var choice = document.createElement("div");
		choice.classList.add("Choice_text");
		line.appendChild(choice);
		lineBox.appendChild(line);
		document.getElementById("empty").appendChild(lineBox);

	}

}



</script>

<div class="main">
<button id="mainBtn" class="btn" style="left:100px;top:150px;" onclick="rotat('lineBox');">Start</button>

<button class="btn" style="left:200px;top:50;" onclick="readList('breakfast');">Breakfast</button>
<button class="btn" style="left:200px;top:100px;" onclick="readList('lunch');">Lunch</button>
<button class="btn" style="left:200px;top:150px;" onclick="readList('dinner');">Dinner</button>
<input type="range" min="-99" max="200" value="0" class="slider" id="Speed">


<div class="Cricle">
<div id="empty">
<div class="lineBox"><div class="line"><div class="Choice_text">初始</div></div></div>

</div>
<div class="centerCircle"></div>
<div class="triangle-down "></div>




<!--<div class="square">

</div>-->



</div>
<div>version 1.8</div>
</body>
</html>